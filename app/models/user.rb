class User < TwitterAuth::GenericUser

  has_many :spoilers
  
  def timeline
    
    if RAILS_ENV == "production"
      twitter.get("/statuses/home_timeline.json")
    else
      ## test data so I don't keep pulling from twitter
      [{"created_at"=>"Sun Dec 13 19:12:28 +0000 2009", "truncated"=>false, "favorited"=>false, "text"=>"At In-N-Out for lunch! Yummy yummy", "id"=>6636518698, "geo"=>nil, "in_reply_to_user_id"=>nil, "user"=>{"name"=>"Cindy Wong", "profile_sidebar_border_color"=>"C6E2EE", "profile_sidebar_fill_color"=>"DAECF4", "profile_background_tile"=>false, "created_at"=>"Mon Mar 30 19:14:13 +0000 2009", "location"=>"909", "profile_image_url"=>"http://a1.twimg.com/profile_images/515601936/3Apples_normal.jpg", "profile_link_color"=>"1F98C7", "url"=>nil, "favourites_count"=>0, "utc_offset"=>-28800, "id"=>27706434, "profile_text_color"=>"663B12", "protected"=>false, "followers_count"=>49, "verified"=>false, "time_zone"=>"Pacific Time (US & Canada)", "notifications"=>false, "geo_enabled"=>false, "profile_background_color"=>"C6E2EE", "description"=>"", "profile_background_image_url"=>"http://s.twimg.com/a/1260393960/images/themes/theme2/bg.gif", "friends_count"=>139, "statuses_count"=>334, "screen_name"=>"soycube", "following"=>false}, "source"=>"<a href=\"http://m.twitter.com/\" rel=\"nofollow\">mobile web</a>", "in_reply_to_screen_name"=>nil, "in_reply_to_status_id"=>nil}, {"created_at"=>"Sun Dec 13 18:58:32 +0000 2009", "truncated"=>false, "favorited"=>false, "text"=>"If you're 21+ I recommend the Ohio-brewed \"BORIS\" oatmeal stout. If you're not 21, have someone buy it for y^H^H^H^H^H^H^H DON'T DRINK BEER", "id"=>6636154719, "geo"=>nil, "in_reply_to_user_id"=>nil, "user"=>{"name"=>"drewtoothpaste", "profile_sidebar_border_color"=>"64b377", "profile_sidebar_fill_color"=>"6cd470", "profile_background_tile"=>false, "created_at"=>"Sat Mar 29 02:33:11 +0000 2008", "location"=>"columbus, OH", "profile_image_url"=>"http://a3.twimg.com/profile_images/57937961/Photo_13_normal.jpg", "profile_link_color"=>"08269e", "url"=>"http://toothpastefordinner.com", "favourites_count"=>0, "utc_offset"=>-18000, "id"=>14248784, "profile_text_color"=>"100d09", "protected"=>false, "followers_count"=>12560, "notifications"=>false, "verified"=>false, "time_zone"=>"Eastern Time (US & Canada)", "geo_enabled"=>false, "profile_background_color"=>"c1e6c1", "description"=>"Author of Toothpaste For Dinner, Married To The Sea, Super Poop. Dot com.", "statuses_count"=>447, "profile_background_image_url"=>"http://a3.twimg.com/profile_background_images/37736429/twitter-bg-jul09-2.jpg", "friends_count"=>29, "screen_name"=>"drewtoothpaste", "following"=>false}, "source"=>"web", "in_reply_to_screen_name"=>nil, "in_reply_to_status_id"=>nil}, {"created_at"=>"Sun Dec 13 18:42:24 +0000 2009", "truncated"=>false, "favorited"=>false, "text"=>"Got an ugly week ahead, and I'm still tired! Man, I better get completely unwound in a hurry!", "id"=>6635742949, "geo"=>nil, "in_reply_to_user_id"=>nil, "user"=>{"name"=>"ignignokt_", "profile_sidebar_border_color"=>"BDDCAD", "profile_sidebar_fill_color"=>"DDFFCC", "profile_background_tile"=>false, "created_at"=>"Wed Mar 12 04:09:51 +0000 2008", "location"=>"Somerville, MA, USA", "profile_image_url"=>"http://a3.twimg.com/profile_images/52796589/boss_crocomire_sm_normal.gif", "profile_link_color"=>"0084B4", "url"=>"http://chaos.corrupt.net", "favourites_count"=>3, "utc_offset"=>-18000, "id"=>14129926, "profile_text_color"=>"333333", "protected"=>true, "followers_count"=>68, "verified"=>false, "notifications"=>false, "time_zone"=>"Eastern Time (US & Canada)", "geo_enabled"=>false, "profile_background_color"=>"ffffff", "description"=>"", "profile_background_image_url"=>"http://s.twimg.com/a/1260393960/images/themes/theme1/bg.png", "friends_count"=>97, "statuses_count"=>5212, "screen_name"=>"ignignokt_", "following"=>false}, "source"=>"<a href=\"http://phalangesoftware.com/attneveryone\" rel=\"nofollow\">attneveryone</a>", "in_reply_to_screen_name"=>nil, "in_reply_to_status_id"=>nil}, {"created_at"=>"Sun Dec 13 17:51:31 +0000 2009", "truncated"=>false, "favorited"=>false, "text"=>"I love it when a test passes when I expect it to fail. My own code surprises me, and that's where testing really shines.", "id"=>6634452327, "geo"=>nil, "in_reply_to_user_id"=>nil, "user"=>{"name"=>"Ryan Bates", "profile_sidebar_border_color"=>"b3b3b3", "profile_sidebar_fill_color"=>"f2f2f2", "profile_background_tile"=>false, "created_at"=>"Fri Mar 28 19:10:25 +0000 2008", "location"=>"Southern Oregon", "profile_image_url"=>"http://a1.twimg.com/profile_images/52189024/ryan_bates_cropped_normal.jpg", "profile_link_color"=>"1c95c4", "url"=>"http://railscasts.com", "favourites_count"=>51, "utc_offset"=>-28800, "id"=>14246143, "followers_count"=>3564, "profile_text_color"=>"000000", "protected"=>false, "time_zone"=>"Pacific Time (US & Canada)", "verified"=>false, "notifications"=>false, "geo_enabled"=>false, "profile_background_color"=>"C6E2EE", "description"=>"Producer of Railscasts - Free Ruby on Rails Screencasts", "profile_background_image_url"=>"http://s.twimg.com/a/1259890793/images/themes/theme2/bg.gif", "friends_count"=>233, "statuses_count"=>2658, "screen_name"=>"rbates", "following"=>true}, "source"=>"<a href=\"http://www.atebits.com/\" rel=\"nofollow\">Tweetie</a>", "in_reply_to_screen_name"=>nil, "in_reply_to_status_id"=>nil}, {"created_at"=>"Sun Dec 13 14:20:43 +0000 2009", "truncated"=>false, "favorited"=>false, "text"=>"Up early again, family stuff today. Up too late w/best buddies playing thru entirety of Beatles Rock Band. Awesome!!", "id"=>6629683004, "geo"=>nil, "in_reply_to_user_id"=>nil, "user"=>{"name"=>"examorata", "profile_sidebar_border_color"=>"87bc44", "profile_sidebar_fill_color"=>"e0ff92", "profile_background_tile"=>false, "created_at"=>"Thu Sep 11 16:09:11 +0000 2008", "location"=>"Columbia, MD", "profile_image_url"=>"http://a1.twimg.com/profile_images/421320658/406177_normal.jpg", "profile_link_color"=>"0000ff", "favourites_count"=>3, "url"=>nil, "utc_offset"=>-18000, "id"=>16242727, "profile_text_color"=>"000000", "protected"=>false, "followers_count"=>303, "notifications"=>false, "time_zone"=>"Eastern Time (US & Canada)", "geo_enabled"=>false, "profile_background_color"=>"F2D0FD", "verified"=>false, "description"=>"Loquacious. Trepidatious. Sesquipedalian.", "profile_background_image_url"=>"http://a3.twimg.com/profile_background_images/37744337/000gbapb.jpg", "friends_count"=>428, "statuses_count"=>4300, "screen_name"=>"examorata", "following"=>false}, "source"=>"<a href=\"http://www.tweetdeck.com/\" rel=\"nofollow\">TweetDeck</a>", "in_reply_to_screen_name"=>nil, "in_reply_to_status_id"=>nil}, {"created_at"=>"Sun Dec 13 06:29:59 +0000 2009", "truncated"=>false, "favorited"=>false, "retweeted_status"=>{"created_at"=>"Sun Dec 13 04:52:36 +0000 2009", "truncated"=>false, "favorited"=>false, "text"=>"http://twitpic.com/tb5sq - You need this. Oh, yes you do. http://j.mp/67TVp4", "id"=>6620418249, "geo"=>nil, "in_reply_to_user_id"=>nil, "user"=>{"name"=>"Roger Ebert", "profile_sidebar_border_color"=>"cfcfcf", "profile_sidebar_fill_color"=>"cfcfcf", "profile_background_tile"=>false, "created_at"=>"Sun Oct 04 18:33:10 +0000 2009", "location"=>"Chicago", "profile_image_url"=>"http://a3.twimg.com/profile_images/452601677/DSC_2648_2_2_normal.jpg", "profile_link_color"=>"454545", "url"=>"http://rogerebert.suntimes.com/", "favourites_count"=>9, "utc_offset"=>-21600, "id"=>79797834, "profile_text_color"=>"000000", "protected"=>false, "followers_count"=>26921, "time_zone"=>"Central Time (US & Canada)", "geo_enabled"=>false, "verified"=>false, "profile_background_color"=>"000000", "description"=>"Thinker, writer and blogger, shallow and profound, correct and mistaken; film critic, Chicago Sun-Times. ", "notifications"=>false, "friends_count"=>23, "profile_background_image_url"=>"http://a3.twimg.com/profile_background_images/46080801/thirdman.jpg", "statuses_count"=>1364, "screen_name"=>"ebertchicago", "following"=>false}, "source"=>"<a href=\"http://twitpic.com/\" rel=\"nofollow\">TwitPic</a>", "in_reply_to_screen_name"=>nil, "in_reply_to_status_id"=>nil}, "text"=>"RT @ebertchicago: http://twitpic.com/tb5sq - You need this. Oh, yes you do. http://j.mp/67TVp4", "id"=>6622494425, "geo"=>nil, "in_reply_to_user_id"=>nil, "user"=>{"name"=>"Amanda C. Peterson", "profile_sidebar_border_color"=>"000000", "profile_sidebar_fill_color"=>"8B8B8B", "profile_background_tile"=>false, "created_at"=>"Fri Apr 20 19:42:56 +0000 2007", "location"=>"San Francisco, CA", "profile_image_url"=>"http://a1.twimg.com/profile_images/17617422/75653373_53b1cef379_normal.jpg", "profile_link_color"=>"5E15BA", "url"=>"http://gucky.guck.net", "favourites_count"=>7, "utc_offset"=>-28800, "id"=>5353362, "profile_text_color"=>"000000", "protected"=>false, "followers_count"=>106, "time_zone"=>"Pacific Time (US & Canada)", "geo_enabled"=>false, "verified"=>false, "profile_background_color"=>"70BA15", "description"=>"I am very gucky", "notifications"=>false, "friends_count"=>92, "profile_background_image_url"=>"http://s.twimg.com/a/1260393960/images/themes/theme1/bg.png", "statuses_count"=>650, "screen_name"=>"gucky", "following"=>false}, "source"=>"web", "in_reply_to_screen_name"=>nil, "in_reply_to_status_id"=>nil}, {"created_at"=>"Sun Dec 13 05:50:16 +0000 2009", "truncated"=>false, "favorited"=>false, "text"=>"Not the biggest fan of BJ Penn personally, but thank you for performing excellently consistently. And thank you, bookmakers, most of all.", "id"=>6621700603, "geo"=>nil, "in_reply_to_user_id"=>nil, "user"=>{"name"=>"ignignokt_", "profile_sidebar_border_color"=>"BDDCAD", "profile_sidebar_fill_color"=>"DDFFCC", "profile_background_tile"=>false, "created_at"=>"Wed Mar 12 04:09:51 +0000 2008", "location"=>"Somerville, MA, USA", "profile_image_url"=>"http://a3.twimg.com/profile_images/52796589/boss_crocomire_sm_normal.gif", "profile_link_color"=>"0084B4", "url"=>"http://chaos.corrupt.net", "favourites_count"=>3, "utc_offset"=>-18000, "id"=>14129926, "followers_count"=>69, "profile_text_color"=>"333333", "protected"=>true, "time_zone"=>"Eastern Time (US & Canada)", "geo_enabled"=>false, "verified"=>false, "profile_background_color"=>"ffffff", "notifications"=>false, "description"=>"", "friends_count"=>98, "profile_background_image_url"=>"http://s.twimg.com/a/1260393960/images/themes/theme1/bg.png", "statuses_count"=>5209, "screen_name"=>"ignignokt_", "following"=>false}, "source"=>"<a href=\"http://phalangesoftware.com/attneveryone\" rel=\"nofollow\">attneveryone</a>", "in_reply_to_screen_name"=>nil, "in_reply_to_status_id"=>nil}, {"created_at"=>"Sun Dec 13 04:32:12 +0000 2009", "truncated"=>false, "favorited"=>false, "text"=>"Any recommendations for watching NFL games online? Most sites in that genre seems very scammy. Pay is fine (trying to avoid cable).", "id"=>6619948974, "geo"=>nil, "in_reply_to_user_id"=>nil, "user"=>{"name"=>"DHH", "profile_sidebar_border_color"=>"87bc44", "profile_sidebar_fill_color"=>"e0ff92", "profile_background_tile"=>false, "created_at"=>"Sun Apr 27 20:19:25 +0000 2008", "location"=>"Chicago, USA", "profile_image_url"=>"http://a1.twimg.com/profile_images/67881828/headshot64_normal.jpg", "profile_link_color"=>"0000ff", "url"=>"http://www.loudthinking.com", "favourites_count"=>1, "utc_offset"=>-21600, "id"=>14561327, "followers_count"=>15874, "profile_text_color"=>"000000", "protected"=>false, "time_zone"=>"Central Time (US & Canada)", "geo_enabled"=>false, "verified"=>false, "profile_background_color"=>"9ae4e8", "notifications"=>false, "description"=>"Creator of Ruby on Rails, Partner at 37signals", "friends_count"=>48, "profile_background_image_url"=>"http://s.twimg.com/a/1259882278/images/themes/theme1/bg.png", "statuses_count"=>800, "screen_name"=>"dhh", "following"=>false}, "source"=>"<a href=\"http://www.atebits.com/\" rel=\"nofollow\">Tweetie</a>", "in_reply_to_screen_name"=>nil, "in_reply_to_status_id"=>nil}, {"created_at"=>"Sun Dec 13 02:16:22 +0000 2009", "truncated"=>false, "favorited"=>false, "text"=>"Dear @Sephora, All I want for the holidays this year is Clarisonic Mia SkinCleansing System. #SephoraClaus", "id"=>6616611865, "geo"=>nil, "in_reply_to_user_id"=>nil, "user"=>{"name"=>"traceracer", "profile_sidebar_border_color"=>"DFDFDF", "profile_sidebar_fill_color"=>"F3F3F3", "profile_background_tile"=>false, "created_at"=>"Sun Aug 17 11:30:24 +0000 2008", "location"=>"Baltimore", "profile_image_url"=>"http://a3.twimg.com/profile_images/556175797/11copy_normal.jpg", "profile_link_color"=>"990000", "url"=>nil, "favourites_count"=>1, "utc_offset"=>-18000, "id"=>15881193, "profile_text_color"=>"333333", "protected"=>true, "followers_count"=>95, "notifications"=>false, "verified"=>false, "time_zone"=>"Eastern Time (US & Canada)", "geo_enabled"=>false, "profile_background_color"=>"EBEBEB", "description"=>"", "profile_background_image_url"=>"http://s.twimg.com/a/1260393960/images/themes/theme7/bg.gif", "friends_count"=>80, "statuses_count"=>967, "screen_name"=>"traceracer", "following"=>false}, "source"=>"<a href=\"http://www.sephoraclaus.com\" rel=\"nofollow\">Sephora Claus</a>", "in_reply_to_screen_name"=>nil, "in_reply_to_status_id"=>nil}, {"created_at"=>"Sun Dec 13 02:03:36 +0000 2009", "truncated"=>false, "favorited"=>false, "text"=>"The downstairs game room smell at Pandemonium is even worse than at Your Move. Impressive.", "id"=>6616288351, "geo"=>nil, "in_reply_to_user_id"=>nil, "user"=>{"name"=>"ignignokt_", "profile_sidebar_border_color"=>"BDDCAD", "profile_sidebar_fill_color"=>"DDFFCC", "profile_background_tile"=>false, "created_at"=>"Wed Mar 12 04:09:51 +0000 2008", "location"=>"Somerville, MA, USA", "profile_image_url"=>"http://a3.twimg.com/profile_images/52796589/boss_crocomire_sm_normal.gif", "profile_link_color"=>"0084B4", "url"=>"http://chaos.corrupt.net", "favourites_count"=>3, "utc_offset"=>-18000, "id"=>14129926, "followers_count"=>69, "profile_text_color"=>"333333", "protected"=>true, "time_zone"=>"Eastern Time (US & Canada)", "geo_enabled"=>false, "verified"=>false, "profile_background_color"=>"ffffff", "notifications"=>false, "description"=>"", "friends_count"=>98, "profile_background_image_url"=>"http://s.twimg.com/a/1260393960/images/themes/theme1/bg.png", "statuses_count"=>5208, "screen_name"=>"ignignokt_", "following"=>false}, "source"=>"<a href=\"http://www.tweetdeck.com/\" rel=\"nofollow\">TweetDeck</a>", "in_reply_to_screen_name"=>nil, "in_reply_to_status_id"=>nil}, {"created_at"=>"Sun Dec 13 02:02:20 +0000 2009", "truncated"=>false, "favorited"=>false, "text"=>"photo.jpg http://flic.kr/p/7nm16F", "id"=>6616255643, "geo"=>nil, "in_reply_to_user_id"=>nil, "user"=>{"name"=>"ignignokt_", "profile_sidebar_border_color"=>"BDDCAD", "profile_sidebar_fill_color"=>"DDFFCC", "profile_background_tile"=>false, "created_at"=>"Wed Mar 12 04:09:51 +0000 2008", "location"=>"Somerville, MA, USA", "profile_image_url"=>"http://a3.twimg.com/profile_images/52796589/boss_crocomire_sm_normal.gif", "profile_link_color"=>"0084B4", "url"=>"http://chaos.corrupt.net", "favourites_count"=>3, "utc_offset"=>-18000, "id"=>14129926, "profile_text_color"=>"333333", "protected"=>true, "followers_count"=>69, "verified"=>false, "notifications"=>false, "time_zone"=>"Eastern Time (US & Canada)", "geo_enabled"=>false, "profile_background_color"=>"ffffff", "description"=>"", "profile_background_image_url"=>"http://s.twimg.com/a/1260393960/images/themes/theme1/bg.png", "friends_count"=>98, "statuses_count"=>5207, "screen_name"=>"ignignokt_", "following"=>false}, "source"=>"<a href=\"http://flickr.com/services/twitter/\" rel=\"nofollow\">Flickr</a>", "in_reply_to_screen_name"=>nil, "in_reply_to_status_id"=>nil}, {"created_at"=>"Sun Dec 13 02:01:55 +0000 2009", "truncated"=>false, "favorited"=>false, "text"=>"photo.jpg http://flic.kr/p/7npUkh", "id"=>6616244368, "geo"=>nil, "in_reply_to_user_id"=>nil, "user"=>{"name"=>"ignignokt_", "profile_sidebar_border_color"=>"BDDCAD", "profile_sidebar_fill_color"=>"DDFFCC", "profile_background_tile"=>false, "created_at"=>"Wed Mar 12 04:09:51 +0000 2008", "location"=>"Somerville, MA, USA", "profile_image_url"=>"http://a3.twimg.com/profile_images/52796589/boss_crocomire_sm_normal.gif", "profile_link_color"=>"0084B4", "favourites_count"=>3, "url"=>"http://chaos.corrupt.net", "utc_offset"=>-18000, "id"=>14129926, "profile_text_color"=>"333333", "protected"=>true, "followers_count"=>69, "notifications"=>false, "time_zone"=>"Eastern Time (US & Canada)", "geo_enabled"=>false, "profile_background_color"=>"ffffff", "verified"=>false, "description"=>"", "profile_background_image_url"=>"http://s.twimg.com/a/1260393960/images/themes/theme1/bg.png", "friends_count"=>98, "statuses_count"=>5206, "screen_name"=>"ignignokt_", "following"=>false}, "source"=>"<a href=\"http://flickr.com/services/twitter/\" rel=\"nofollow\">Flickr</a>", "in_reply_to_screen_name"=>nil, "in_reply_to_status_id"=>nil}, {"created_at"=>"Sun Dec 13 00:55:25 +0000 2009", "truncated"=>false, "favorited"=>false, "text"=>"Jack on JCM's Aint that America: \"except for the people whose homeowners associations won't let them paint their houses pink\"", "id"=>6614590030, "geo"=>nil, "in_reply_to_user_id"=>nil, "user"=>{"name"=>"snidegrrl", "profile_sidebar_border_color"=>"6C1C00", "profile_sidebar_fill_color"=>"F8E78A", "profile_background_tile"=>true, "created_at"=>"Mon Aug 06 14:35:17 +0000 2007", "location"=>"Laurel, MD", "profile_image_url"=>"http://a1.twimg.com/profile_images/60372284/iconworthy_normal.jpg", "profile_link_color"=>"A100FF", "url"=>"http://www.prosaicparadise.com/", "favourites_count"=>63, "utc_offset"=>-18000, "id"=>7993742, "profile_text_color"=>"6C1C00", "protected"=>false, "followers_count"=>334, "notifications"=>false, "verified"=>false, "time_zone"=>"Quito", "geo_enabled"=>false, "profile_background_color"=>"C4FDD7", "description"=>"I'm a non-techie techie who drums and wants to help people.", "statuses_count"=>3865, "profile_background_image_url"=>"http://a1.twimg.com/profile_background_images/385492/wallpaper-trick.jpg", "friends_count"=>263, "screen_name"=>"snidegrrl", "following"=>false}, "source"=>"<a href=\"http://www.stone.com/Twittelator\" rel=\"nofollow\">Twittelator</a>", "in_reply_to_screen_name"=>nil, "in_reply_to_status_id"=>nil}, {"created_at"=>"Sun Dec 13 00:09:29 +0000 2009", "truncated"=>false, "favorited"=>false, "text"=>"On the other hand, Bob & Doug McKenzie's 12 Days of Christmas? Bring it on! \"Five golden toques!\"", "id"=>6613505968, "geo"=>nil, "in_reply_to_user_id"=>nil, "user"=>{"name"=>"examorata", "profile_sidebar_border_color"=>"87bc44", "profile_sidebar_fill_color"=>"e0ff92", "profile_background_tile"=>false, "created_at"=>"Thu Sep 11 16:09:11 +0000 2008", "location"=>"Columbia, MD", "profile_image_url"=>"http://a1.twimg.com/profile_images/421320658/406177_normal.jpg", "profile_link_color"=>"0000ff", "url"=>nil, "favourites_count"=>3, "utc_offset"=>-18000, "id"=>16242727, "followers_count"=>304, "profile_text_color"=>"000000", "protected"=>false, "time_zone"=>"Eastern Time (US & Canada)", "geo_enabled"=>false, "verified"=>false, "profile_background_color"=>"F2D0FD", "notifications"=>nil, "description"=>"Loquacious. Trepidatious. Sesquipedalian.", "friends_count"=>427, "profile_background_image_url"=>"http://a3.twimg.com/profile_background_images/37744337/000gbapb.jpg", "statuses_count"=>4299, "screen_name"=>"examorata", "following"=>nil}, "source"=>"<a href=\"http://www.tweetdeck.com/\" rel=\"nofollow\">TweetDeck</a>", "in_reply_to_screen_name"=>nil, "in_reply_to_status_id"=>nil}, {"created_at"=>"Sun Dec 13 00:06:55 +0000 2009", "truncated"=>false, "favorited"=>false, "text"=>"I did not need to hear \"Please Daddy Don't Get Drunk This Christmas\" twice today, or once even! Why, John Denver, why!?", "id"=>6613446890, "geo"=>nil, "in_reply_to_user_id"=>nil, "user"=>{"name"=>"examorata", "profile_sidebar_border_color"=>"87bc44", "profile_sidebar_fill_color"=>"e0ff92", "profile_background_tile"=>false, "created_at"=>"Thu Sep 11 16:09:11 +0000 2008", "location"=>"Columbia, MD", "profile_image_url"=>"http://a1.twimg.com/profile_images/421320658/406177_normal.jpg", "profile_link_color"=>"0000ff", "url"=>nil, "favourites_count"=>3, "utc_offset"=>-18000, "id"=>16242727, "profile_text_color"=>"000000", "protected"=>false, "followers_count"=>302, "notifications"=>nil, "verified"=>false, "time_zone"=>"Eastern Time (US & Canada)", "geo_enabled"=>false, "profile_background_color"=>"F2D0FD", "description"=>"Loquacious. Trepidatious. Sesquipedalian.", "statuses_count"=>4297, "profile_background_image_url"=>"http://a3.twimg.com/profile_background_images/37744337/000gbapb.jpg", "friends_count"=>427, "screen_name"=>"examorata", "following"=>nil}, "source"=>"<a href=\"http://www.tweetdeck.com/\" rel=\"nofollow\">TweetDeck</a>", "in_reply_to_screen_name"=>nil, "in_reply_to_status_id"=>nil}, {"created_at"=>"Sat Dec 12 23:29:19 +0000 2009", "truncated"=>false, "favorited"=>false, "text"=>"Editing photos.  Now I remember why I usually drink while doing this.", "id"=>6612575525, "geo"=>nil, "in_reply_to_user_id"=>nil, "user"=>{"name"=>"jwiv", "profile_sidebar_border_color"=>"829D5E", "profile_sidebar_fill_color"=>"99CC33", "profile_background_tile"=>false, "created_at"=>"Thu Apr 03 10:16:59 +0000 2008", "location"=>"Baltimore, MD", "profile_image_url"=>"http://a1.twimg.com/profile_images/280693044/4397_90941566659_575521659_2577951_3812663_s_normal.jpg", "profile_link_color"=>"D02B55", "favourites_count"=>0, "url"=>"http://jwiv.livejournal.com", "utc_offset"=>-18000, "id"=>14292072, "profile_text_color"=>"3E4415", "protected"=>false, "followers_count"=>119, "verified"=>false, "notifications"=>false, "time_zone"=>"Eastern Time (US & Canada)", "geo_enabled"=>false, "profile_background_color"=>"352726", "description"=>"Husband and father. Network engineer.  Grognard tendancies.  ", "profile_background_image_url"=>"http://s.twimg.com/a/1260393960/images/themes/theme5/bg.gif", "friends_count"=>142, "statuses_count"=>1857, "screen_name"=>"jwiv", "following"=>false}, "source"=>"web", "in_reply_to_screen_name"=>nil, "in_reply_to_status_id"=>nil}, {"created_at"=>"Sat Dec 12 22:37:30 +0000 2009", "truncated"=>false, "favorited"=>false, "text"=>"OK kitty pics are up on Facebook. @sillyKris @wojo4hitz", "id"=>6611379931, "geo"=>nil, "in_reply_to_user_id"=>nil, "user"=>{"name"=>"Cecily is me!", "profile_sidebar_border_color"=>"4f0bbc", "profile_sidebar_fill_color"=>"b97aee", "profile_background_tile"=>true, "created_at"=>"Thu Sep 11 13:39:51 +0000 2008", "location"=>"I live in the town of Columbia", "profile_image_url"=>"http://a1.twimg.com/profile_images/530276944/Bald_Beauty_Smaller_normal.JPG", "profile_link_color"=>"890b0e", "favourites_count"=>13, "url"=>"http://ceciskittle.livejournal.com/", "utc_offset"=>-18000, "id"=>16240139, "profile_text_color"=>"3D1957", "protected"=>false, "followers_count"=>120, "verified"=>false, "notifications"=>false, "time_zone"=>"Quito", "geo_enabled"=>false, "profile_background_color"=>"642D8B", "description"=>"I am eclectic and eccentric.  I am a mother and a lover.  I am artsy in almost every way.  I am a hippie and a pagan.  I am what I am.  ", "profile_background_image_url"=>"http://a1.twimg.com/profile_background_images/3512406/Willy_Wonka_2.jpg", "friends_count"=>113, "statuses_count"=>3401, "screen_name"=>"CeciTart", "following"=>true}, "source"=>"<a href=\"http://www.tweetdeck.com/\" rel=\"nofollow\">TweetDeck</a>", "in_reply_to_screen_name"=>nil, "in_reply_to_status_id"=>nil}, {"created_at"=>"Sat Dec 12 22:27:55 +0000 2009", "truncated"=>false, "favorited"=>false, "text"=>"Stuff moved, errands run: so. Tired. I think it might be a lazy Saturday night for moi.", "id"=>6611161064, "geo"=>nil, "in_reply_to_user_id"=>nil, "user"=>{"name"=>"examorata", "profile_sidebar_border_color"=>"87bc44", "profile_sidebar_fill_color"=>"e0ff92", "profile_background_tile"=>false, "created_at"=>"Thu Sep 11 16:09:11 +0000 2008", "location"=>"Columbia, MD", "profile_image_url"=>"http://a1.twimg.com/profile_images/421320658/406177_normal.jpg", "profile_link_color"=>"0000ff", "url"=>nil, "favourites_count"=>3, "utc_offset"=>-18000, "id"=>16242727, "profile_text_color"=>"000000", "protected"=>false, "followers_count"=>302, "verified"=>false, "time_zone"=>"Eastern Time (US & Canada)", "geo_enabled"=>false, "notifications"=>false, "profile_background_color"=>"F2D0FD", "description"=>"Loquacious. Trepidatious. Sesquipedalian.", "profile_background_image_url"=>"http://a3.twimg.com/profile_background_images/37744337/000gbapb.jpg", "friends_count"=>427, "statuses_count"=>4296, "screen_name"=>"examorata", "following"=>false}, "source"=>"<a href=\"http://www.tweetdeck.com/\" rel=\"nofollow\">TweetDeck</a>", "in_reply_to_screen_name"=>nil, "in_reply_to_status_id"=>nil}, {"created_at"=>"Sat Dec 12 22:22:20 +0000 2009", "truncated"=>false, "favorited"=>false, "text"=>"IMG_0695.MOV http://flic.kr/p/7nnFCL", "id"=>6611034935, "geo"=>nil, "in_reply_to_user_id"=>nil, "user"=>{"name"=>"ignignokt_", "profile_sidebar_border_color"=>"BDDCAD", "profile_sidebar_fill_color"=>"DDFFCC", "profile_background_tile"=>false, "created_at"=>"Wed Mar 12 04:09:51 +0000 2008", "location"=>"Somerville, MA, USA", "profile_image_url"=>"http://a3.twimg.com/profile_images/52796589/boss_crocomire_sm_normal.gif", "profile_link_color"=>"0084B4", "url"=>"http://chaos.corrupt.net", "favourites_count"=>3, "utc_offset"=>-18000, "id"=>14129926, "followers_count"=>68, "profile_text_color"=>"333333", "protected"=>true, "time_zone"=>"Eastern Time (US & Canada)", "geo_enabled"=>false, "verified"=>false, "profile_background_color"=>"ffffff", "notifications"=>false, "description"=>"", "friends_count"=>97, "profile_background_image_url"=>"http://s.twimg.com/a/1260393960/images/themes/theme1/bg.png", "statuses_count"=>5209, "screen_name"=>"ignignokt_", "following"=>true}, "source"=>"<a href=\"http://flickr.com/services/twitter/\" rel=\"nofollow\">Flickr</a>", "in_reply_to_screen_name"=>nil, "in_reply_to_status_id"=>nil}, {"created_at"=>"Sat Dec 12 22:12:25 +0000 2009", "truncated"=>false, "favorited"=>false, "text"=>"Thanks to the human inventions of gloves and the hat, that run was not brutal like I thought it would be when we first got outside.", "id"=>6610810066, "geo"=>nil, "in_reply_to_user_id"=>nil, "user"=>{"name"=>"ignignokt_", "profile_sidebar_border_color"=>"BDDCAD", "profile_sidebar_fill_color"=>"DDFFCC", "profile_background_tile"=>false, "created_at"=>"Wed Mar 12 04:09:51 +0000 2008", "location"=>"Somerville, MA, USA", "profile_image_url"=>"http://a3.twimg.com/profile_images/52796589/boss_crocomire_sm_normal.gif", "profile_link_color"=>"0084B4", "favourites_count"=>3, "url"=>"http://chaos.corrupt.net", "utc_offset"=>-18000, "id"=>14129926, "profile_text_color"=>"333333", "protected"=>true, "followers_count"=>69, "notifications"=>false, "time_zone"=>"Eastern Time (US & Canada)", "geo_enabled"=>false, "profile_background_color"=>"ffffff", "verified"=>false, "description"=>"", "profile_background_image_url"=>"http://s.twimg.com/a/1260393960/images/themes/theme1/bg.png", "friends_count"=>98, "statuses_count"=>5204, "screen_name"=>"ignignokt_", "following"=>false}, "source"=>"<a href=\"http://www.tweetdeck.com/\" rel=\"nofollow\">TweetDeck</a>", "in_reply_to_screen_name"=>nil, "in_reply_to_status_id"=>nil}]
      
    end
  end
  
  def spoiler_free_timeline
    timeline.map do |tweet|
      if spoiler?(tweet["text"])
        Redacted.new(tweet,spoiled_on(tweet["text"]))
      else
        tweet
      end
    end
  end
  
  def spoiler?(tweet)
    spoilers.each do |spoiler|
      return true if tweet =~ /#{spoiler.name}/i
    end
    return false
  end
  
  def spoiled_on(tweet)
    spoilers.reject {|spoiler| tweet !~ /#{spoiler.name}/i}
  end
  
end
