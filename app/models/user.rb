class User < TwitterAuth::GenericUser

  has_many :spoilers
  
  def timeline
    twitter.get("/statuses/home_timeline.json")
    
    ## test data so I don't keep pulling from twitter
    # [{"created_at"=>"Thu Dec 10 15:01:21 +0000 2009", "favorited"=>false, "truncated"=>false, "text"=>"Dear RiffTraxClaus, I'd be thrilled with a 32GB iPhone 3GS & all the IKEA meatballs I can eat (gift card?) http://j.mp/3ZHgcL #RiffTraxSANTA", "id"=>6533451357, "geo"=>nil, "in_reply_to_user_id"=>nil, "user"=>{"name"=>"examorata", "profile_background_tile"=>false, "profile_sidebar_border_color"=>"87bc44", "profile_sidebar_fill_color"=>"e0ff92", "created_at"=>"Thu Sep 11 16:09:11 +0000 2008", "profile_image_url"=>"http://a1.twimg.com/profile_images/421320658/406177_normal.jpg", "location"=>"Columbia, MD", "profile_link_color"=>"0000ff", "url"=>nil, "favourites_count"=>3, "utc_offset"=>-18000, "id"=>16242727, "followers_count"=>297, "protected"=>false, "profile_text_color"=>"000000", "geo_enabled"=>false, "profile_background_color"=>"F2D0FD", "time_zone"=>"Eastern Time (US & Canada)", "notifications"=>false, "verified"=>false, "description"=>"Loquacious. Trepidatious. Sesquipedalian.", "friends_count"=>420, "profile_background_image_url"=>"http://a3.twimg.com/profile_background_images/37744337/000gbapb.jpg", "statuses_count"=>4251, "following"=>false, "screen_name"=>"examorata"}, "in_reply_to_screen_name"=>nil, "source"=>"<a href=\"http://echofon.com/\" rel=\"nofollow\">Echofon</a>", "in_reply_to_status_id"=>nil}, {"created_at"=>"Thu Dec 10 14:52:14 +0000 2009", "favorited"=>false, "truncated"=>false, "text"=>"Oh man, The Amby Bed, something I highly recommended to people, and lent out, has been recalled! http://tinyurl.com/yk3vo3g", "id"=>6533199243, "geo"=>nil, "in_reply_to_user_id"=>nil, "user"=>{"name"=>"traceracer", "profile_background_tile"=>false, "profile_sidebar_border_color"=>"DFDFDF", "profile_sidebar_fill_color"=>"F3F3F3", "created_at"=>"Sun Aug 17 11:30:24 +0000 2008", "profile_image_url"=>"http://a3.twimg.com/profile_images/556175797/11copy_normal.jpg", "location"=>"Baltimore", "profile_link_color"=>"990000", "url"=>nil, "favourites_count"=>1, "utc_offset"=>-18000, "id"=>15881193, "protected"=>true, "profile_text_color"=>"333333", "followers_count"=>96, "geo_enabled"=>false, "profile_background_color"=>"EBEBEB", "verified"=>false, "notifications"=>false, "time_zone"=>"Eastern Time (US & Canada)", "description"=>"", "profile_background_image_url"=>"http://s.twimg.com/a/1260307830/images/themes/theme7/bg.gif", "friends_count"=>80, "statuses_count"=>963, "following"=>true, "screen_name"=>"traceracer"}, "in_reply_to_screen_name"=>nil, "source"=>"web", "in_reply_to_status_id"=>nil}, {"created_at"=>"Thu Dec 10 14:48:11 +0000 2009", "favorited"=>false, "truncated"=>false, "text"=>"There are some pretty surly shits working at the UPS Store. How dare I ask how much it costs to ship something somewhere?!", "id"=>6533090177, "geo"=>nil, "in_reply_to_user_id"=>nil, "user"=>{"name"=>"ignignokt_", "profile_background_tile"=>false, "profile_sidebar_border_color"=>"BDDCAD", "profile_sidebar_fill_color"=>"DDFFCC", "created_at"=>"Wed Mar 12 04:09:51 +0000 2008", "profile_image_url"=>"http://a3.twimg.com/profile_images/52796589/boss_crocomire_sm_normal.gif", "location"=>"Somerville, MA, USA", "profile_link_color"=>"0084B4", "url"=>"http://chaos.corrupt.net", "favourites_count"=>3, "utc_offset"=>-18000, "id"=>14129926, "protected"=>true, "profile_text_color"=>"333333", "followers_count"=>69, "geo_enabled"=>false, "profile_background_color"=>"ffffff", "verified"=>false, "notifications"=>false, "time_zone"=>"Eastern Time (US & Canada)", "description"=>"", "profile_background_image_url"=>"http://s.twimg.com/a/1259882278/images/themes/theme1/bg.png", "statuses_count"=>5182, "friends_count"=>98, "following"=>false, "screen_name"=>"ignignokt_"}, "in_reply_to_screen_name"=>nil, "source"=>"<a href=\"http://phalangesoftware.com/attneveryone\" rel=\"nofollow\">attneveryone</a>", "in_reply_to_status_id"=>nil}, {"created_at"=>"Thu Dec 10 11:41:14 +0000 2009", "favorited"=>false, "truncated"=>false, "text"=>"Cold out there, like a slap in the face with a very cold thing. Feel so virtuous walking to workout that workout itself seems secondary.", "id"=>6528882240, "geo"=>nil, "in_reply_to_user_id"=>nil, "user"=>{"name"=>"examorata", "profile_background_tile"=>false, "profile_sidebar_border_color"=>"87bc44", "profile_sidebar_fill_color"=>"e0ff92", "created_at"=>"Thu Sep 11 16:09:11 +0000 2008", "profile_image_url"=>"http://a1.twimg.com/profile_images/421320658/406177_normal.jpg", "location"=>"Columbia, MD", "profile_link_color"=>"0000ff", "url"=>nil, "favourites_count"=>3, "utc_offset"=>-18000, "id"=>16242727, "followers_count"=>297, "protected"=>false, "profile_text_color"=>"000000", "geo_enabled"=>false, "profile_background_color"=>"F2D0FD", "time_zone"=>"Eastern Time (US & Canada)", "notifications"=>false, "verified"=>false, "description"=>"Loquacious. Trepidatious. Sesquipedalian.", "friends_count"=>420, "profile_background_image_url"=>"http://a3.twimg.com/profile_background_images/37744337/000gbapb.jpg", "statuses_count"=>4249, "following"=>false, "screen_name"=>"examorata"}, "in_reply_to_screen_name"=>nil, "source"=>"<a href=\"http://www.tweetdeck.com/\" rel=\"nofollow\">TweetDeck</a>", "in_reply_to_status_id"=>nil}, {"created_at"=>"Thu Dec 10 06:08:55 +0000 2009", "favorited"=>false, "truncated"=>false, "text"=>"Oh! Forgot. @sarahlane and I made appearances on 100th episode of The Digg Reel. http://bit.ly/PHLeg Yes, it says PHleg.", "id"=>6523586578, "geo"=>nil, "in_reply_to_user_id"=>nil, "user"=>{"name"=>"Martin Sargent", "profile_background_tile"=>false, "profile_sidebar_border_color"=>"BDDCAD", "profile_sidebar_fill_color"=>"DDFFCC", "created_at"=>"Wed Apr 30 05:57:08 +0000 2008", "profile_image_url"=>"http://a1.twimg.com/profile_images/62154492/martin_normal.jpg", "location"=>"Old Fog Town", "profile_link_color"=>"0084B4", "url"=>"http://www.martinsargent.com", "favourites_count"=>3, "utc_offset"=>-28800, "id"=>14596798, "protected"=>false, "profile_text_color"=>"333333", "followers_count"=>16007, "geo_enabled"=>false, "profile_background_color"=>"9AE4E8", "notifications"=>nil, "time_zone"=>"Pacific Time (US & Canada)", "description"=>"I am Internet.", "verified"=>false, "statuses_count"=>837, "profile_background_image_url"=>"http://a1.twimg.com/profile_background_images/3845852/cool-pony.jpg", "friends_count"=>91, "following"=>nil, "screen_name"=>"martinsargent"}, "in_reply_to_screen_name"=>nil, "source"=>"web", "in_reply_to_status_id"=>nil}, {"created_at"=>"Thu Dec 10 04:56:37 +0000 2009", "favorited"=>false, "truncated"=>false, "text"=>"need more glee stat", "id"=>6522001256, "geo"=>nil, "in_reply_to_user_id"=>nil, "user"=>{"name"=>"traceracer", "profile_background_tile"=>false, "profile_sidebar_border_color"=>"DFDFDF", "profile_sidebar_fill_color"=>"F3F3F3", "created_at"=>"Sun Aug 17 11:30:24 +0000 2008", "profile_image_url"=>"http://a3.twimg.com/profile_images/556175797/11copy_normal.jpg", "location"=>"Baltimore", "profile_link_color"=>"990000", "url"=>nil, "favourites_count"=>1, "utc_offset"=>-18000, "id"=>15881193, "protected"=>true, "profile_text_color"=>"333333", "followers_count"=>97, "geo_enabled"=>false, "profile_background_color"=>"EBEBEB", "verified"=>false, "notifications"=>false, "time_zone"=>"Eastern Time (US & Canada)", "description"=>"", "profile_background_image_url"=>"http://s.twimg.com/a/1260307830/images/themes/theme7/bg.gif", "statuses_count"=>962, "friends_count"=>80, "following"=>true, "screen_name"=>"traceracer"}, "in_reply_to_screen_name"=>nil, "source"=>"<a href=\"http://m.twitter.com/\" rel=\"nofollow\">mobile web</a>", "in_reply_to_status_id"=>nil}, {"created_at"=>"Thu Dec 10 04:42:52 +0000 2009", "favorited"=>false, "truncated"=>false, "text"=>"After 5 years of owning this couch we finally found the perfect way to curl up on it.", "id"=>6521668866, "geo"=>nil, "in_reply_to_user_id"=>nil, "user"=>{"name"=>"snidegrrl", "profile_background_tile"=>true, "profile_sidebar_border_color"=>"6C1C00", "profile_sidebar_fill_color"=>"F8E78A", "created_at"=>"Mon Aug 06 14:35:17 +0000 2007", "profile_image_url"=>"http://a1.twimg.com/profile_images/60372284/iconworthy_normal.jpg", "location"=>"Laurel, MD", "profile_link_color"=>"A100FF", "url"=>"http://www.prosaicparadise.com/", "favourites_count"=>63, "utc_offset"=>-18000, "id"=>7993742, "followers_count"=>334, "protected"=>false, "profile_text_color"=>"6C1C00", "geo_enabled"=>false, "profile_background_color"=>"C4FDD7", "verified"=>false, "time_zone"=>"Quito", "notifications"=>false, "description"=>"I'm a non-techie techie who drums and wants to help people.", "friends_count"=>260, "profile_background_image_url"=>"http://a1.twimg.com/profile_background_images/385492/wallpaper-trick.jpg", "statuses_count"=>3846, "following"=>false, "screen_name"=>"snidegrrl"}, "in_reply_to_screen_name"=>nil, "source"=>"<a href=\"http://www.stone.com/Twittelator\" rel=\"nofollow\">Twittelator</a>", "in_reply_to_status_id"=>nil}, {"created_at"=>"Thu Dec 10 04:42:15 +0000 2009", "favorited"=>false, "truncated"=>false, "text"=>"Super weird: Hirokazu (\"Hip\") Tanaka gathers the other Hirokazu Tanakas together, and they sing: http://is.gd/5htYk", "id"=>6521654383, "geo"=>nil, "in_reply_to_user_id"=>nil, "user"=>{"name"=>"ignignokt_", "profile_background_tile"=>false, "profile_sidebar_border_color"=>"BDDCAD", "profile_sidebar_fill_color"=>"DDFFCC", "created_at"=>"Wed Mar 12 04:09:51 +0000 2008", "profile_image_url"=>"http://a3.twimg.com/profile_images/52796589/boss_crocomire_sm_normal.gif", "location"=>"Somerville, MA, USA", "profile_link_color"=>"0084B4", "url"=>"http://chaos.corrupt.net", "favourites_count"=>3, "utc_offset"=>-18000, "id"=>14129926, "followers_count"=>69, "protected"=>true, "profile_text_color"=>"333333", "geo_enabled"=>false, "profile_background_color"=>"ffffff", "notifications"=>false, "verified"=>false, "time_zone"=>"Eastern Time (US & Canada)", "description"=>"", "profile_background_image_url"=>"http://s.twimg.com/a/1259882278/images/themes/theme1/bg.png", "friends_count"=>98, "statuses_count"=>5181, "following"=>false, "screen_name"=>"ignignokt_"}, "in_reply_to_screen_name"=>nil, "source"=>"<a href=\"http://phalangesoftware.com/attneveryone\" rel=\"nofollow\">attneveryone</a>", "in_reply_to_status_id"=>nil}, {"created_at"=>"Thu Dec 10 03:31:41 +0000 2009", "favorited"=>false, "truncated"=>false, "text"=>"Sweet dreams, Twitterverse!", "id"=>6519777310, "geo"=>nil, "in_reply_to_user_id"=>nil, "user"=>{"name"=>"examorata", "profile_background_tile"=>false, "profile_sidebar_border_color"=>"87bc44", "profile_sidebar_fill_color"=>"e0ff92", "created_at"=>"Thu Sep 11 16:09:11 +0000 2008", "profile_image_url"=>"http://a1.twimg.com/profile_images/421320658/406177_normal.jpg", "location"=>"Columbia, MD", "profile_link_color"=>"0000ff", "url"=>nil, "favourites_count"=>3, "utc_offset"=>-18000, "id"=>16242727, "protected"=>false, "profile_text_color"=>"000000", "followers_count"=>297, "geo_enabled"=>false, "profile_background_color"=>"F2D0FD", "verified"=>false, "notifications"=>false, "time_zone"=>"Eastern Time (US & Canada)", "description"=>"Loquacious. Trepidatious. Sesquipedalian.", "profile_background_image_url"=>"http://a3.twimg.com/profile_background_images/37744337/000gbapb.jpg", "friends_count"=>420, "statuses_count"=>4245, "following"=>false, "screen_name"=>"examorata"}, "in_reply_to_screen_name"=>nil, "source"=>"<a href=\"http://www.tweetdeck.com/\" rel=\"nofollow\">TweetDeck</a>", "in_reply_to_status_id"=>nil}, {"created_at"=>"Thu Dec 10 00:31:03 +0000 2009", "favorited"=>false, "truncated"=>false, "text"=>"sorry about bad link - early Christmas present for my D&D players: http://bit.ly/7fui5J", "id"=>6514318442, "geo"=>nil, "in_reply_to_user_id"=>nil, "user"=>{"name"=>"cwgabriel", "profile_background_tile"=>false, "profile_sidebar_border_color"=>"829D5E", "profile_sidebar_fill_color"=>"99CC33", "created_at"=>"Mon Apr 21 17:18:28 +0000 2008", "profile_image_url"=>"http://a3.twimg.com/profile_images/53101189/gabe_head_normal.jpg", "location"=>"iPhone: 44.925713,-124.018112", "profile_link_color"=>"D02B55", "favourites_count"=>0, "url"=>nil, "utc_offset"=>-28800, "id"=>14464369, "protected"=>false, "followers_count"=>36787, "profile_text_color"=>"3E4415", "geo_enabled"=>false, "profile_background_color"=>"352726", "notifications"=>true, "time_zone"=>"Pacific Time (US & Canada)", "verified"=>false, "description"=>nil, "friends_count"=>23, "profile_background_image_url"=>"http://s.twimg.com/a/1259882278/images/themes/theme5/bg.gif", "statuses_count"=>734, "following"=>true, "screen_name"=>"cwgabriel"}, "in_reply_to_screen_name"=>nil, "source"=>"<a href=\"http://www.tweetdeck.com/\" rel=\"nofollow\">TweetDeck</a>", "in_reply_to_status_id"=>nil}, {"created_at"=>"Thu Dec 10 00:27:47 +0000 2009", "favorited"=>false, "truncated"=>false, "text"=>"Christ. When did statistics get this hard?", "id"=>6514222118, "geo"=>nil, "in_reply_to_user_id"=>nil, "user"=>{"name"=>"oontzgrrl", "profile_background_tile"=>false, "profile_sidebar_border_color"=>"000000", "profile_sidebar_fill_color"=>"c2b494", "created_at"=>"Sat Dec 01 00:59:20 +0000 2007", "profile_image_url"=>"http://a1.twimg.com/profile_images/516524666/Photo_109_normal.jpg", "location"=>"Tehran", "profile_link_color"=>"b3201b", "url"=>"http://oontzgrrl.livejournal.com/", "favourites_count"=>0, "utc_offset"=>12600, "id"=>10755172, "protected"=>true, "profile_text_color"=>"000000", "followers_count"=>85, "geo_enabled"=>false, "profile_background_color"=>"ffffff", "verified"=>false, "notifications"=>false, "time_zone"=>"Tehran", "description"=>"I don't set out to offend or shock, but I also don't do anything to avoid it.", "statuses_count"=>1897, "profile_background_image_url"=>"http://a1.twimg.com/profile_background_images/52102466/nvRequiemForARobot.br.jpg", "friends_count"=>78, "following"=>true, "screen_name"=>"oontzgrrl"}, "in_reply_to_screen_name"=>nil, "source"=>"<a href=\"http://www.qtweeter.com\" rel=\"nofollow\">qTweeter</a>", "in_reply_to_status_id"=>nil}, {"created_at"=>"Thu Dec 10 00:00:55 +0000 2009", "favorited"=>false, "truncated"=>false, "text"=>"The Medicare buy-in compromise sounded good until I read that it's only for people over 55. WTF, \"liberal\" senators?", "id"=>6513427627, "geo"=>nil, "in_reply_to_user_id"=>nil, "user"=>{"name"=>"ignignokt_", "profile_background_tile"=>false, "profile_sidebar_border_color"=>"BDDCAD", "profile_sidebar_fill_color"=>"DDFFCC", "created_at"=>"Wed Mar 12 04:09:51 +0000 2008", "profile_image_url"=>"http://a3.twimg.com/profile_images/52796589/boss_crocomire_sm_normal.gif", "location"=>"Somerville, MA, USA", "profile_link_color"=>"0084B4", "favourites_count"=>3, "url"=>"http://chaos.corrupt.net", "utc_offset"=>-18000, "id"=>14129926, "protected"=>true, "followers_count"=>69, "profile_text_color"=>"333333", "geo_enabled"=>false, "profile_background_color"=>"ffffff", "notifications"=>false, "time_zone"=>"Eastern Time (US & Canada)", "description"=>"", "verified"=>false, "friends_count"=>98, "profile_background_image_url"=>"http://s.twimg.com/a/1259882278/images/themes/theme1/bg.png", "statuses_count"=>5180, "following"=>false, "screen_name"=>"ignignokt_"}, "in_reply_to_screen_name"=>nil, "source"=>"<a href=\"http://phalangesoftware.com/attneveryone\" rel=\"nofollow\">attneveryone</a>", "in_reply_to_status_id"=>nil}, {"created_at"=>"Wed Dec 09 22:53:33 +0000 2009", "favorited"=>false, "truncated"=>false, "text"=>"early Christmas present for my D&D players:http://bit.ly/7fui5J", "id"=>6511490598, "geo"=>nil, "in_reply_to_user_id"=>nil, "user"=>{"name"=>"cwgabriel", "profile_background_tile"=>false, "profile_sidebar_border_color"=>"829D5E", "profile_sidebar_fill_color"=>"99CC33", "created_at"=>"Mon Apr 21 17:18:28 +0000 2008", "profile_image_url"=>"http://a3.twimg.com/profile_images/53101189/gabe_head_normal.jpg", "location"=>"iPhone: 44.925713,-124.018112", "profile_link_color"=>"D02B55", "url"=>nil, "favourites_count"=>0, "utc_offset"=>-28800, "id"=>14464369, "protected"=>false, "profile_text_color"=>"3E4415", "followers_count"=>36787, "geo_enabled"=>false, "profile_background_color"=>"352726", "verified"=>false, "notifications"=>true, "time_zone"=>"Pacific Time (US & Canada)", "description"=>nil, "profile_background_image_url"=>"http://s.twimg.com/a/1259882278/images/themes/theme5/bg.gif", "friends_count"=>23, "statuses_count"=>733, "following"=>true, "screen_name"=>"cwgabriel"}, "in_reply_to_screen_name"=>nil, "source"=>"<a href=\"http://www.tweetdeck.com/\" rel=\"nofollow\">TweetDeck</a>", "in_reply_to_status_id"=>nil}, {"created_at"=>"Wed Dec 09 22:43:54 +0000 2009", "favorited"=>false, "truncated"=>false, "text"=>"Stress and leftover fortune cookies for lunch. Make it stop.", "id"=>6511230728, "geo"=>nil, "in_reply_to_user_id"=>nil, "user"=>{"name"=>"Amanda C. Peterson", "profile_background_tile"=>false, "profile_sidebar_border_color"=>"000000", "profile_sidebar_fill_color"=>"8B8B8B", "created_at"=>"Fri Apr 20 19:42:56 +0000 2007", "profile_image_url"=>"http://a1.twimg.com/profile_images/17617422/75653373_53b1cef379_normal.jpg", "location"=>"San Francisco, CA", "profile_link_color"=>"5E15BA", "url"=>"http://gucky.guck.net", "favourites_count"=>7, "utc_offset"=>-28800, "id"=>5353362, "protected"=>false, "profile_text_color"=>"000000", "followers_count"=>107, "geo_enabled"=>false, "profile_background_color"=>"70BA15", "verified"=>false, "notifications"=>false, "time_zone"=>"Pacific Time (US & Canada)", "description"=>"I am very gucky", "profile_background_image_url"=>"http://s.twimg.com/a/1260307830/images/themes/theme1/bg.png", "statuses_count"=>649, "friends_count"=>92, "following"=>true, "screen_name"=>"gucky"}, "in_reply_to_screen_name"=>nil, "source"=>"<a href=\"http://www.seesmic.com/\" rel=\"nofollow\">Seesmic</a>", "in_reply_to_status_id"=>nil}, {"created_at"=>"Wed Dec 09 22:33:15 +0000 2009", "favorited"=>false, "truncated"=>false, "text"=>"Not being a jerk, but Lilian is just as cute as the baby girl finalists in the Gap Casting Call http://family.go.com/gapcastingcall/vote/", "id"=>6510954346, "geo"=>nil, "in_reply_to_user_id"=>nil, "user"=>{"name"=>"traceracer", "profile_background_tile"=>false, "profile_sidebar_border_color"=>"DFDFDF", "profile_sidebar_fill_color"=>"F3F3F3", "created_at"=>"Sun Aug 17 11:30:24 +0000 2008", "profile_image_url"=>"http://a3.twimg.com/profile_images/556175797/11copy_normal.jpg", "location"=>"Baltimore", "profile_link_color"=>"990000", "url"=>nil, "favourites_count"=>1, "utc_offset"=>-18000, "id"=>15881193, "protected"=>true, "followers_count"=>97, "profile_text_color"=>"333333", "geo_enabled"=>false, "profile_background_color"=>"EBEBEB", "verified"=>false, "time_zone"=>"Eastern Time (US & Canada)", "description"=>"", "notifications"=>false, "friends_count"=>80, "profile_background_image_url"=>"http://s.twimg.com/a/1260307830/images/themes/theme7/bg.gif", "statuses_count"=>961, "following"=>false, "screen_name"=>"traceracer"}, "in_reply_to_screen_name"=>nil, "source"=>"<a href=\"http://echofon.com/\" rel=\"nofollow\">Echofon</a>", "in_reply_to_status_id"=>nil}, {"created_at"=>"Wed Dec 09 22:20:52 +0000 2009", "favorited"=>false, "truncated"=>false, "text"=>"4 @lindaaargh RT @jamminjava R U a fan of Harry Potter? Then dont miss Sonorus (Virginiaâ€™s 1st Wizard Rock Festival) http://j.mp/4SNZgv", "id"=>6510630626, "geo"=>nil, "in_reply_to_user_id"=>nil, "user"=>{"name"=>"snidegrrl", "profile_background_tile"=>true, "profile_sidebar_border_color"=>"6C1C00", "profile_sidebar_fill_color"=>"F8E78A", "created_at"=>"Mon Aug 06 14:35:17 +0000 2007", "profile_image_url"=>"http://a1.twimg.com/profile_images/60372284/iconworthy_normal.jpg", "location"=>"Laurel, MD", "profile_link_color"=>"A100FF", "url"=>"http://www.prosaicparadise.com/", "favourites_count"=>63, "utc_offset"=>-18000, "id"=>7993742, "followers_count"=>334, "protected"=>false, "profile_text_color"=>"6C1C00", "geo_enabled"=>false, "profile_background_color"=>"C4FDD7", "verified"=>false, "notifications"=>false, "time_zone"=>"Quito", "description"=>"I'm a non-techie techie who drums and wants to help people.", "profile_background_image_url"=>"http://a1.twimg.com/profile_background_images/385492/wallpaper-trick.jpg", "statuses_count"=>3844, "friends_count"=>260, "following"=>false, "screen_name"=>"snidegrrl"}, "in_reply_to_screen_name"=>nil, "source"=>"<a href=\"http://www.stone.com/Twittelator\" rel=\"nofollow\">Twittelator</a>", "in_reply_to_status_id"=>nil}, {"created_at"=>"Wed Dec 09 22:17:58 +0000 2009", "favorited"=>false, "truncated"=>false, "text"=>"it is Dickerdoodle time at Penny Arcade:http://bit.ly/V65zZ. Send me your cookie porn!", "id"=>6510553129, "geo"=>nil, "in_reply_to_user_id"=>nil, "user"=>{"name"=>"cwgabriel", "profile_background_tile"=>false, "profile_sidebar_border_color"=>"829D5E", "profile_sidebar_fill_color"=>"99CC33", "created_at"=>"Mon Apr 21 17:18:28 +0000 2008", "profile_image_url"=>"http://a3.twimg.com/profile_images/53101189/gabe_head_normal.jpg", "location"=>"iPhone: 44.925713,-124.018112", "profile_link_color"=>"D02B55", "url"=>nil, "favourites_count"=>0, "utc_offset"=>-28800, "id"=>14464369, "protected"=>false, "profile_text_color"=>"3E4415", "followers_count"=>36786, "geo_enabled"=>false, "profile_background_color"=>"352726", "verified"=>false, "notifications"=>false, "time_zone"=>"Pacific Time (US & Canada)", "description"=>nil, "profile_background_image_url"=>"http://s.twimg.com/a/1259882278/images/themes/theme5/bg.gif", "friends_count"=>23, "statuses_count"=>732, "following"=>true, "screen_name"=>"cwgabriel"}, "in_reply_to_screen_name"=>nil, "source"=>"<a href=\"http://www.tweetdeck.com/\" rel=\"nofollow\">TweetDeck</a>", "in_reply_to_status_id"=>nil}, {"created_at"=>"Wed Dec 09 21:48:39 +0000 2009", "favorited"=>false, "truncated"=>false, "text"=>"Why do I watch this show?!", "id"=>6509738027, "geo"=>nil, "in_reply_to_user_id"=>nil, "user"=>{"name"=>"Cecily is me!", "profile_background_tile"=>true, "profile_sidebar_border_color"=>"4f0bbc", "profile_sidebar_fill_color"=>"b97aee", "created_at"=>"Thu Sep 11 13:39:51 +0000 2008", "profile_image_url"=>"http://a1.twimg.com/profile_images/530276944/Bald_Beauty_Smaller_normal.JPG", "location"=>"I live in the town of Columbia", "profile_link_color"=>"890b0e", "url"=>"http://ceciskittle.livejournal.com/", "favourites_count"=>13, "utc_offset"=>-18000, "id"=>16240139, "followers_count"=>119, "protected"=>false, "profile_text_color"=>"3D1957", "geo_enabled"=>false, "profile_background_color"=>"642D8B", "time_zone"=>"Quito", "notifications"=>nil, "verified"=>false, "description"=>"I am eclectic and eccentric.  I am a mother and a lover.  I am artsy in almost every way.  I am a hippie and a pagan.  I am what I am.  ", "friends_count"=>113, "profile_background_image_url"=>"http://a1.twimg.com/profile_background_images/3512406/Willy_Wonka_2.jpg", "statuses_count"=>3387, "following"=>nil, "screen_name"=>"CeciTart"}, "in_reply_to_screen_name"=>nil, "source"=>"<a href=\"http://www.tweetdeck.com/\" rel=\"nofollow\">TweetDeck</a>", "in_reply_to_status_id"=>nil}, {"created_at"=>"Wed Dec 09 20:59:30 +0000 2009", "favorited"=>false, "truncated"=>false, "text"=>"RT: @baltimoresun: An Annapolis canon becomes the first openly homosexual woman to be named an Episcopal bishop. http://bit.ly/5LooAv", "id"=>6508373690, "geo"=>nil, "in_reply_to_user_id"=>nil, "user"=>{"name"=>"examorata", "profile_background_tile"=>false, "profile_sidebar_border_color"=>"87bc44", "profile_sidebar_fill_color"=>"e0ff92", "created_at"=>"Thu Sep 11 16:09:11 +0000 2008", "profile_image_url"=>"http://a1.twimg.com/profile_images/421320658/406177_normal.jpg", "location"=>"Columbia, MD", "profile_link_color"=>"0000ff", "url"=>nil, "favourites_count"=>3, "utc_offset"=>-18000, "id"=>16242727, "followers_count"=>296, "protected"=>false, "profile_text_color"=>"000000", "geo_enabled"=>false, "profile_background_color"=>"F2D0FD", "time_zone"=>"Eastern Time (US & Canada)", "notifications"=>nil, "verified"=>false, "description"=>"Loquacious. Trepidatious. Sesquipedalian.", "friends_count"=>419, "profile_background_image_url"=>"http://a3.twimg.com/profile_background_images/37744337/000gbapb.jpg", "statuses_count"=>4244, "following"=>nil, "screen_name"=>"examorata"}, "in_reply_to_screen_name"=>nil, "source"=>"<a href=\"http://echofon.com/\" rel=\"nofollow\">Echofon</a>", "in_reply_to_status_id"=>nil}, {"created_at"=>"Wed Dec 09 20:57:58 +0000 2009", "favorited"=>false, "truncated"=>false, "text"=>"photo.jpg http://flic.kr/p/7mEJNX", "id"=>6508332202, "geo"=>nil, "in_reply_to_user_id"=>nil, "user"=>{"name"=>"ignignokt_", "profile_background_tile"=>false, "profile_sidebar_border_color"=>"BDDCAD", "profile_sidebar_fill_color"=>"DDFFCC", "created_at"=>"Wed Mar 12 04:09:51 +0000 2008", "profile_image_url"=>"http://a3.twimg.com/profile_images/52796589/boss_crocomire_sm_normal.gif", "location"=>"Somerville, MA, USA", "profile_link_color"=>"0084B4", "url"=>"http://chaos.corrupt.net", "favourites_count"=>3, "utc_offset"=>-18000, "id"=>14129926, "protected"=>true, "profile_text_color"=>"333333", "followers_count"=>69, "geo_enabled"=>false, "profile_background_color"=>"ffffff", "verified"=>false, "notifications"=>false, "time_zone"=>"Eastern Time (US & Canada)", "description"=>"", "profile_background_image_url"=>"http://s.twimg.com/a/1259882278/images/themes/theme1/bg.png", "statuses_count"=>5178, "friends_count"=>98, "following"=>false, "screen_name"=>"ignignokt_"}, "in_reply_to_screen_name"=>nil, "source"=>"<a href=\"http://flickr.com/services/twitter/\" rel=\"nofollow\">Flickr</a>", "in_reply_to_status_id"=>nil}]
  end
  
  def spoiler_free_timeline
    timeline.map do |tweet|
      if spoiler?(tweet["text"])
        Redacted.new(tweet,spoiled_on(tweet["text"]))
      else
        tweet
      end
    end
  end
  
  def spoiler?(tweet)
    spoilers.each do |spoiler|
      return true if tweet =~ /#{spoiler.name}/i
    end
    return false
  end
  
  def spoiled_on(tweet)
    spoilers.reject {|spoiler| tweet !~ /#{spoiler.name}/i}
  end
  
end
